var PI;PI=window.PI=window.PI||{},PI.CampaignDetails=function(){function e(e){e==null&&(e={}),this.manager=new PI.CampaignManager,this.promote=new PI.CampaignPromote,this.disburse=new PI.CampaignDisburse,this.total=ko.observable(e.total),this.total.subscribe(this.render_pie,this)}return e.render=function(e){var t;return t=new this(e),t.render(),ko.applyBindings(t),t},e.prototype.pieData=function(e){var t,n,r,i;return e&&e>0||(e=0),e>100&&(e=100),r=100-e,i=0,e<100&&(e<=50&&(i=-180*(r/100)),e>50&&(i=180*(e/100))),t=["#739b9e","#fff"],e<=50&&t.reverse(),e>=100&&(t=["#739b9e"]),e>=100&&(n=[100]),e<100&&(n=[e,r]),{total:e,remaining:r,rotation:i,data:n,colors:t}},e.prototype.render=function(e){var t,n;e==null&&(e={}),t=e.el||jQuery("#pie-chart"),n=e.total||this.total();if(!(t&&t.length>0))return;return this.el=t,this.graph=Raphael(this.el[0],200,200),this.render_pie(n),this},e.prototype.render_pie=function(e){var t;if(!this.graph)return;return this.graph.clear(),t=this.pieData(e),this.pie=this.graph.piechart(100,100,100,t.data,{init:.1,colors:t.colors}),t.rotation&&this.pie.rotate(t.rotation),this.graph.circle(100,100,98).animate({stroke:"#747C7D","stroke-width":2}).blur(),this.graph.circle(100,100,99).animate({stroke:"#aaa","stroke-width":1}),this.graph.circle(100,100,70).animate({stroke:"#747C7D","stroke-width":2}),this.graph.circle(100,100,72).animate({stroke:"#747C7D","stroke-width":2}).blur(),this.graph.circle(100,100,70).animate({stroke:"#aaa","stroke-width":1,fill:"#fff"}),this},e}(),PI.CampaignManager=function(){function e(){this.tab=ko.observable(),this.tab.subscribe(this.onTab,this),this.navigate(location.hash),this.visible=ko.observable(!!this.tab())}return e.prototype.show=function(){return this.visible(!0)},e.prototype.hide=function(){return this.visible(!1)},e.prototype.toggle=function(){return this.visible(!this.visible())},e.prototype.navigate=function(e){return e=(e!=null?e:location.hash).replace(/^#/g,""),(e==="manage"||e==="promote"||e==="disburse")&&this.tab(e),this},e.prototype.onTab=function(){var e;e=this.tab();if(!e)return;return jQuery(".nav-tabs li a[href=#"+e+"]").tab("show")},e.prototype.cancel=function(){},e}();